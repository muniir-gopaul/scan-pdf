import{p as X,b as Fa,c as ya,d as Ba,h as Va,e as Na,f as Ra,g as Ya,i as ba,Q as Lt,v as Ha,j as Jt,k as Ia,l as Gt,m as Ea,n as $a,r as ea,s as ja,o as ta,u as Qa,a as La}from"./use-quasar-CgGvTes6.js";import{a as g,a1 as Sa,a2 as za,c as Se,a3 as nt,a4 as _a,g as Ce,a5 as ot,a6 as Ua,r as $,a7 as wa,w as ue,e as Mt,h as m,a8 as Le,b as pe,a9 as Za,L as he,aa as ze,ab as Wa,ac as Ka,R as Zt,ad as Xa,ae as Ja,af as Ga,ag as el,ah as tl,ai as al,aj as aa,ak as ll,al as nl,m as ol,Q as ie,s as Ca,t as Pa,l as la,am as Da,o as Wt,O as rl,N as sl,d as mt,A as Kt,an as il,ao as ul,ap as cl,aq as na,ar as zt,as as oa,at as dl,au as Rt,W as kt,av as Yt,aw as vl,ax as fl,ay as ml,az as gl,aA as hl,aB as yl,aC as bl,aD as ra,aE as sa,Y as Ie,C as oe,aF as Sl,B as _e,D as L,H as T,I as R,Z as Qe,aG as _l,K as Je,J as ce,$ as Ht,V as Ge,X as wl,aH as Cl,_ as Ae,aI as Pl,aJ as Dl,aK as pl}from"./index-B-FUFzE6.js";import{api as vt}from"./axios-B2fH7xVF.js";function xl(){let e=Object.create(null);return{getCache:(a,r)=>e[a]===void 0?e[a]=typeof r=="function"?r():r:e[a],setCache(a,r){e[a]=r},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const Ee=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function kl(e,a,r){return Object.prototype.toString.call(e)==="[object Date]"&&(r=e.getDate(),a=e.getMonth()+1,e=e.getFullYear()),Ol(Xt(e,a,r))}function ia(e,a,r){return xa(Tl(e,a,r))}function ql(e){return Ml(e)===0}function qt(e,a){return a<=6?31:a<=11||ql(e)?30:29}function Ml(e){const a=Ee.length;let r=Ee[0],u,n,o,v,s;if(e<r||e>=Ee[a-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<a&&(u=Ee[s],n=u-r,!(e<u));s+=1)r=u;return v=e-r,n-v<6&&(v=v-n+ee(n+4,33)*33),o=we(we(v+1,33)-1,4),o===-1&&(o=4),o}function pa(e,a){const r=Ee.length,u=e+621;let n=-14,o=Ee[0],v,s,c,h,i;if(e<o||e>=Ee[r-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<r&&(v=Ee[i],s=v-o,!(e<v));i+=1)n=n+ee(s,33)*8+ee(we(s,33),4),o=v;h=e-o,n=n+ee(h,33)*8+ee(we(h,33)+3,4),we(s,33)===4&&s-h===4&&(n+=1);const S=ee(u,4)-ee((ee(u,100)+1)*3,4)-150,q=20+n-S;return a||(s-h<6&&(h=h-s+ee(s+4,33)*33),c=we(we(h+1,33)-1,4),c===-1&&(c=4)),{leap:c,gy:u,march:q}}function Tl(e,a,r){const u=pa(e,!0);return Xt(u.gy,3,u.march)+(a-1)*31-ee(a,7)*(a-7)+r-1}function Ol(e){const a=xa(e).gy;let r=a-621,u,n,o;const v=pa(r,!1),s=Xt(a,3,v.march);if(o=e-s,o>=0){if(o<=185)return n=1+ee(o,31),u=we(o,31)+1,{jy:r,jm:n,jd:u};o-=186}else r-=1,o+=179,v.leap===1&&(o+=1);return n=7+ee(o,30),u=we(o,30)+1,{jy:r,jm:n,jd:u}}function Xt(e,a,r){let u=ee((e+ee(a-8,6)+100100)*1461,4)+ee(153*we(a+9,12)+2,5)+r-34840408;return u=u-ee(ee(e+100100+ee(a-8,6),100)*3,4)+752,u}function xa(e){let a=4*e+139361631;a=a+ee(ee(4*e+183187720,146097)*3,4)*4-3908;const r=ee(we(a,1461),4)*5+308,u=ee(we(r,153),5)+1,n=we(ee(r,153),12)+1;return{gy:ee(a,1461)-100100+ee(8-n,6),gm:n,gd:u}}function ee(e,a){return~~(e/a)}function we(e,a){return e-~~(e/a)*a}const Al=["gregorian","persian"],ua={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Al.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Fl=["update:modelValue"];function Ye(e){return e.year+"/"+X(e.month)+"/"+X(e.day)}function Bl(e,a){const r=g(()=>e.disable!==!0&&e.readonly!==!0),u=g(()=>r.value===!0?0:-1),n=g(()=>{const s=[];return e.color!==void 0&&s.push(`bg-${e.color}`),e.textColor!==void 0&&s.push(`text-${e.textColor}`),s.join(" ")});function o(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function v(s){const c=new Date,h=s===!0?null:0;if(e.calendar==="persian"){const i=kl(c);return{year:i.jy,month:i.jm,day:i.jd}}return{year:c.getFullYear(),month:c.getMonth()+1,day:c.getDate(),hour:h,minute:h,second:h,millisecond:h}}return{editable:r,tabindex:u,headerClass:n,getLocale:o,getCurrentDate:v}}const ka=864e5,Vl=36e5,Ut=6e4,qa="YYYY-MM-DDTHH:mm:ss.SSSZ",Nl=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Rl=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,It={};function Yl(e,a){const r="("+a.days.join("|")+")",u=e+r;if(It[u]!==void 0)return It[u];const n="("+a.daysShort.join("|")+")",o="("+a.months.join("|")+")",v="("+a.monthsShort.join("|")+")",s={};let c=0;const h=e.replace(Rl,S=>{switch(c++,S){case"YY":return s.YY=c,"(-?\\d{1,2})";case"YYYY":return s.YYYY=c,"(-?\\d{1,4})";case"M":return s.M=c,"(\\d{1,2})";case"Mo":return s.M=c++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return s.M=c,"(\\d{2})";case"MMM":return s.MMM=c,v;case"MMMM":return s.MMMM=c,o;case"D":return s.D=c,"(\\d{1,2})";case"Do":return s.D=c++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=c,"(\\d{2})";case"H":return s.H=c,"(\\d{1,2})";case"HH":return s.H=c,"(\\d{2})";case"h":return s.h=c,"(\\d{1,2})";case"hh":return s.h=c,"(\\d{2})";case"m":return s.m=c,"(\\d{1,2})";case"mm":return s.m=c,"(\\d{2})";case"s":return s.s=c,"(\\d{1,2})";case"ss":return s.s=c,"(\\d{2})";case"S":return s.S=c,"(\\d{1})";case"SS":return s.S=c,"(\\d{2})";case"SSS":return s.S=c,"(\\d{3})";case"A":return s.A=c,"(AM|PM)";case"a":return s.a=c,"(am|pm)";case"aa":return s.aa=c,"(a\\.m\\.|p\\.m\\.)";case"ddd":return n;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"do":return c++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return c++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return c++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return s.Z=c,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=c,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=c,"(-?\\d+)";case"x":return s.x=c,"(-?\\d{4,})";default:return c--,S[0]==="["&&(S=S.substring(1,S.length-1)),S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),i={map:s,regex:new RegExp("^"+h)};return It[u]=i,i}function Ma(e,a){return e!==void 0?e:a!==void 0?a.date:za.date}function ca(e,a=""){const r=e>0?"-":"+",u=Math.abs(e),n=Math.floor(u/60),o=u%60;return r+X(n)+a+X(o)}function Hl(e,a,r,u,n){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(n!==void 0&&Object.assign(o,n),e==null||e===""||typeof e!="string")return o;a===void 0&&(a=qa);const v=Ma(r,Sa.props),s=v.months,c=v.monthsShort,{regex:h,map:i}=Yl(a,v),S=e.match(h);if(S===null)return o;let q="";if(i.X!==void 0||i.x!==void 0){const O=parseInt(S[i.X!==void 0?i.X:i.x],10);if(isNaN(O)===!0||O<0)return o;const A=new Date(O*(i.X!==void 0?1e3:1));o.year=A.getFullYear(),o.month=A.getMonth()+1,o.day=A.getDate(),o.hour=A.getHours(),o.minute=A.getMinutes(),o.second=A.getSeconds(),o.millisecond=A.getMilliseconds()}else{if(i.YYYY!==void 0)o.year=parseInt(S[i.YYYY],10);else if(i.YY!==void 0){const O=parseInt(S[i.YY],10);o.year=O<0?O:2e3+O}if(i.M!==void 0){if(o.month=parseInt(S[i.M],10),o.month<1||o.month>12)return o}else i.MMM!==void 0?o.month=c.indexOf(S[i.MMM])+1:i.MMMM!==void 0&&(o.month=s.indexOf(S[i.MMMM])+1);if(i.D!==void 0){if(o.day=parseInt(S[i.D],10),o.year===null||o.month===null||o.day<1)return o;const O=u!=="persian"?new Date(o.year,o.month,0).getDate():qt(o.year,o.month);if(o.day>O)return o}i.H!==void 0?o.hour=parseInt(S[i.H],10)%24:i.h!==void 0&&(o.hour=parseInt(S[i.h],10)%12,(i.A&&S[i.A]==="PM"||i.a&&S[i.a]==="pm"||i.aa&&S[i.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),i.m!==void 0&&(o.minute=parseInt(S[i.m],10)%60),i.s!==void 0&&(o.second=parseInt(S[i.s],10)%60),i.S!==void 0&&(o.millisecond=parseInt(S[i.S],10)*10**(3-S[i.S].length)),(i.Z!==void 0||i.ZZ!==void 0)&&(q=i.Z!==void 0?S[i.Z].replace(":",""):S[i.ZZ],o.timezoneOffset=(q[0]==="+"?-1:1)*(60*q.slice(1,3)+1*q.slice(3,5)))}return o.dateHash=X(o.year,4)+"/"+X(o.month)+"/"+X(o.day),o.timeHash=X(o.hour)+":"+X(o.minute)+":"+X(o.second)+q,o}function Et(e){const a=new Date(e.getFullYear(),e.getMonth(),e.getDate());a.setDate(a.getDate()-(a.getDay()+6)%7+3);const r=new Date(a.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const u=a.getTimezoneOffset()-r.getTimezoneOffset();a.setHours(a.getHours()-u);const n=(a-r)/(ka*7);return 1+Math.floor(n)}function Be(e,a,r){const u=new Date(e),n=`set${r===!0?"UTC":""}`;switch(a){case"year":case"years":u[`${n}Month`](0);case"month":case"months":u[`${n}Date`](1);case"day":case"days":case"date":u[`${n}Hours`](0);case"hour":case"hours":u[`${n}Minutes`](0);case"minute":case"minutes":u[`${n}Seconds`](0);case"second":case"seconds":u[`${n}Milliseconds`](0)}return u}function Ct(e,a,r){return(e.getTime()-e.getTimezoneOffset()*Ut-(a.getTime()-a.getTimezoneOffset()*Ut))/r}function Ta(e,a,r="days"){const u=new Date(e),n=new Date(a);switch(r){case"years":case"year":return u.getFullYear()-n.getFullYear();case"months":case"month":return(u.getFullYear()-n.getFullYear())*12+u.getMonth()-n.getMonth();case"days":case"day":case"date":return Ct(Be(u,"day"),Be(n,"day"),ka);case"hours":case"hour":return Ct(Be(u,"hour"),Be(n,"hour"),Vl);case"minutes":case"minute":return Ct(Be(u,"minute"),Be(n,"minute"),Ut);case"seconds":case"second":return Ct(Be(u,"second"),Be(n,"second"),1e3)}}function $t(e){return Ta(e,Be(e,"year"),"days")+1}function et(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const da={YY(e,a,r){const u=this.YYYY(e,a,r)%100;return u>=0?X(u):"-"+X(Math.abs(u))},YYYY(e,a,r){return r??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return et(e.getMonth()+1)},MM(e){return X(e.getMonth()+1)},MMM(e,a){return a.monthsShort[e.getMonth()]},MMMM(e,a){return a.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return et(this.Q(e))},D(e){return e.getDate()},Do(e){return et(e.getDate())},DD(e){return X(e.getDate())},DDD(e){return $t(e)},DDDo(e){return et($t(e))},DDDD(e){return X($t(e),3)},d(e){return e.getDay()},do(e){return et(e.getDay())},dd(e,a){return a.days[e.getDay()].slice(0,2)},ddd(e,a){return a.daysShort[e.getDay()]},dddd(e,a){return a.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Et(e)},wo(e){return et(Et(e))},ww(e){return X(Et(e))},H(e){return e.getHours()},HH(e){return X(e.getHours())},h(e){const a=e.getHours();return a===0?12:a>12?a%12:a},hh(e){return X(this.h(e))},m(e){return e.getMinutes()},mm(e){return X(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return X(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return X(Math.floor(e.getMilliseconds()/10))},SSS(e){return X(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,a,r,u){const n=u??e.getTimezoneOffset();return ca(n,":")},ZZ(e,a,r,u){const n=u??e.getTimezoneOffset();return ca(n)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Il(e,a,r,u,n){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;a===void 0&&(a=qa);const v=Ma(r,Sa.props);return a.replace(Nl,(s,c)=>s in da?da[s](o,v,u,n):c===void 0?s:c.split("\\]").join("]"))}const Fe=20,El=["Calendar","Years","Months"],va=e=>El.includes(e),jt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),tt=" â€” ";function He(e){return e.year+"/"+X(e.month)}const $l=Se({name:"QDate",props:{...ua,..._a,...nt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...ua.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:jt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:jt},navigationMaxYearMonth:{type:String,validator:jt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:va}},emits:[...Fl,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:r}){const{proxy:u}=Ce(),{$q:n}=u,o=ot(e,n),{getCache:v}=xl(),{tabindex:s,headerClass:c,getLocale:h,getCurrentDate:i}=Bl(e,n);let S;const q=Ua(e),O=Za(q),A=$(null),b=$(yt()),C=$(h()),U=g(()=>yt()),p=g(()=>h()),j=g(()=>i()),D=$(Te(b.value,C.value)),V=$(e.defaultView),I=g(()=>n.lang.rtl===!0?"right":"left"),W=$(I.value),K=$(I.value),H=D.value.year,z=$(H-H%Fe-(H<0?Fe:0)),Z=$(null),xe=g(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),de=g(()=>e.color||"primary"),ve=g(()=>e.textColor||"white"),ye=g(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),fe=g(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),F=g(()=>fe.value.filter(t=>typeof t=="string").map(t=>je(t,b.value,C.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),J=g(()=>{const t=l=>je(l,b.value,C.value);return fe.value.filter(l=>wa(l)===!0&&l.from!==void 0&&l.to!==void 0).map(l=>({from:t(l.from),to:t(l.to)})).filter(l=>l.from.dateHash!==null&&l.to.dateHash!==null&&l.from.dateHash<l.to.dateHash)}),te=g(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const l=ia(t.year,t.month,t.day);return new Date(l.gy,l.gm-1,l.gd)}),be=g(()=>e.calendar==="persian"?Ye:(t,l,f)=>Il(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),l===void 0?b.value:l,f===void 0?C.value:f,t.year,t.timezoneOffset)),ne=g(()=>F.value.length+J.value.reduce((t,l)=>t+1+Ta(te.value(l.to),te.value(l.from)),0)),qe=g(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(Z.value!==null){const f=Z.value.init,P=te.value(f);return C.value.daysShort[P.getDay()]+", "+C.value.monthsShort[f.month-1]+" "+f.day+tt+"?"}if(ne.value===0)return tt;if(ne.value>1)return`${ne.value} ${C.value.pluralDay}`;const t=F.value[0],l=te.value(t);return isNaN(l.valueOf())===!0?tt:C.value.headerTitle!==void 0?C.value.headerTitle(l,t):C.value.daysShort[l.getDay()]+", "+C.value.monthsShort[t.month-1]+" "+t.day}),w=g(()=>F.value.concat(J.value.map(l=>l.from)).sort((l,f)=>l.year-f.year||l.month-f.month)[0]),y=g(()=>F.value.concat(J.value.map(l=>l.to)).sort((l,f)=>f.year-l.year||f.month-l.month)[0]),_=g(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ne.value===0)return tt;if(ne.value>1){const t=w.value,l=y.value,f=C.value.monthsShort;return f[t.month-1]+(t.year!==l.year?" "+t.year+tt+f[l.month-1]+" ":t.month!==l.month?tt+f[l.month-1]:"")+" "+l.year}return F.value[0].year}),se=g(()=>{const t=[n.iconSet.datetime.arrowLeft,n.iconSet.datetime.arrowRight];return n.lang.rtl===!0?t.reverse():t}),$e=g(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):C.value.firstDayOfWeek),Ue=g(()=>{const t=C.value.daysShort,l=$e.value;return l>0?t.slice(l,7).concat(t.slice(0,l)):t}),Pe=g(()=>{const t=D.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():qt(t.year,t.month)}),rt=g(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),re=g(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),me=g(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ve=g(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return re.value!==null&&re.value.year>=D.value.year&&(t.year.prev=!1,re.value.year===D.value.year&&re.value.month>=D.value.month&&(t.month.prev=!1)),me.value!==null&&me.value.year<=D.value.year&&(t.year.next=!1,me.value.year===D.value.year&&me.value.month<=D.value.month&&(t.month.next=!1)),t}),Ne=g(()=>{const t={};return F.value.forEach(l=>{const f=He(l);t[f]===void 0&&(t[f]=[]),t[f].push(l.day)}),t}),Ze=g(()=>{const t={};return J.value.forEach(l=>{const f=He(l.from),P=He(l.to);if(t[f]===void 0&&(t[f]=[]),t[f].push({from:l.from.day,to:f===P?l.to.day:void 0,range:l}),f<P){let x;const{year:Q,month:M}=l.from,E=M<12?{year:Q,month:M+1}:{year:Q+1,month:1};for(;(x=He(E))<=P;)t[x]===void 0&&(t[x]=[]),t[x].push({from:void 0,to:x===P?l.to.day:void 0,range:l}),E.month++,E.month>12&&(E.year++,E.month=1)}}),t}),Me=g(()=>{if(Z.value===null)return;const{init:t,initHash:l,final:f,finalHash:P}=Z.value,[x,Q]=l<=P?[t,f]:[f,t],M=He(x),E=He(Q);if(M!==ge.value&&E!==ge.value)return;const G={};return M===ge.value?(G.from=x.day,G.includeFrom=!0):G.from=1,E===ge.value?(G.to=Q.day,G.includeTo=!0):G.to=Pe.value,G}),ge=g(()=>He(D.value)),Tt=g(()=>{const t={};if(e.options===void 0){for(let f=1;f<=Pe.value;f++)t[f]=!0;return t}const l=typeof e.options=="function"?e.options:f=>e.options.includes(f);for(let f=1;f<=Pe.value;f++){const P=ge.value+"/"+X(f);t[f]=l(P)}return t}),Ot=g(()=>{const t={};if(e.events===void 0)for(let l=1;l<=Pe.value;l++)t[l]=!1;else{const l=typeof e.events=="function"?e.events:f=>e.events.includes(f);for(let f=1;f<=Pe.value;f++){const P=ge.value+"/"+X(f);t[f]=l(P)===!0&&rt.value(P)}}return t}),At=g(()=>{let t,l;const{year:f,month:P}=D.value;if(e.calendar!=="persian")t=new Date(f,P-1,1),l=new Date(f,P-1,0).getDate();else{const x=ia(f,P,1);t=new Date(x.gy,x.gm-1,x.gd);let Q=P-1,M=f;Q===0&&(Q=12,M--),l=qt(M,Q)}return{days:t.getDay()-$e.value-1,endDay:l}}),gt=g(()=>{const t=[],{days:l,endDay:f}=At.value,P=l<0?l+7:l;if(P<6)for(let M=f-P;M<=f;M++)t.push({i:M,fill:!0});const x=t.length;for(let M=1;M<=Pe.value;M++){const E={i:M,event:Ot.value[M],classes:[]};Tt.value[M]===!0&&(E.in=!0,E.flat=!0),t.push(E)}if(Ne.value[ge.value]!==void 0&&Ne.value[ge.value].forEach(M=>{const E=x+M-1;Object.assign(t[E],{selected:!0,unelevated:!0,flat:!1,color:de.value,textColor:ve.value})}),Ze.value[ge.value]!==void 0&&Ze.value[ge.value].forEach(M=>{if(M.from!==void 0){const E=x+M.from-1,G=x+(M.to||Pe.value)-1;for(let dt=E;dt<=G;dt++)Object.assign(t[dt],{range:M.range,unelevated:!0,color:de.value,textColor:ve.value});Object.assign(t[E],{rangeFrom:!0,flat:!1}),M.to!==void 0&&Object.assign(t[G],{rangeTo:!0,flat:!1})}else if(M.to!==void 0){const E=x+M.to-1;for(let G=x;G<=E;G++)Object.assign(t[G],{range:M.range,unelevated:!0,color:de.value,textColor:ve.value});Object.assign(t[E],{flat:!1,rangeTo:!0})}else{const E=x+Pe.value-1;for(let G=x;G<=E;G++)Object.assign(t[G],{range:M.range,unelevated:!0,color:de.value,textColor:ve.value})}}),Me.value!==void 0){const M=x+Me.value.from-1,E=x+Me.value.to-1;for(let G=M;G<=E;G++)t[G].color=de.value,t[G].editRange=!0;Me.value.includeFrom===!0&&(t[M].editRangeFrom=!0),Me.value.includeTo===!0&&(t[E].editRangeTo=!0)}D.value.year===j.value.year&&D.value.month===j.value.month&&(t[x+j.value.day-1].today=!0);const Q=t.length%7;if(Q>0){const M=7-Q;for(let E=1;E<=M;E++)t.push({i:E,fill:!0})}return t.forEach(M=>{let E="q-date__calendar-item ";M.fill===!0?E+="q-date__calendar-item--fill":(E+=`q-date__calendar-item--${M.in===!0?"in":"out"}`,M.range!==void 0&&(E+=` q-date__range${M.rangeTo===!0?"-to":M.rangeFrom===!0?"-from":""}`),M.editRange===!0&&(E+=` q-date__edit-range${M.editRangeFrom===!0?"-from":""}${M.editRangeTo===!0?"-to":""}`),(M.range!==void 0||M.editRange===!0)&&(E+=` text-${M.color}`)),M.classes=E}),t}),Ft=g(()=>e.disable===!0?{"aria-disabled":"true"}:{});ue(()=>e.modelValue,t=>{if(S===JSON.stringify(t))S=0;else{const l=Te(b.value,C.value);De(l.year,l.month,l)}}),ue(V,()=>{A.value!==null&&u.$el.contains(document.activeElement)===!0&&A.value.focus()}),ue(()=>D.value.year+"|"+D.value.month,()=>{r("navigation",{year:D.value.year,month:D.value.month})}),ue(U,t=>{k(t,C.value,"mask"),b.value=t}),ue(p,t=>{k(b.value,t,"locale"),C.value=t});function st(t){S=JSON.stringify(t)}function it(){const{year:t,month:l,day:f}=j.value,P={...D.value,year:t,month:l,day:f},x=Ne.value[He(P)];(x===void 0||x.includes(P.day)===!1)&&ct(P),We(P.year,P.month)}function ht(t){va(t)===!0&&(V.value=t)}function Bt(t,l){["month","year"].includes(t)&&(t==="month"?bt:Ke)(l===!0?-1:1)}function We(t,l){V.value="Calendar",De(t,l)}function Vt(t,l){if(e.range===!1||!t){Z.value=null;return}const f=Object.assign({...D.value},t),P=l!==void 0?Object.assign({...D.value},l):f;Z.value={init:f,initHash:Ye(f),final:P,finalHash:Ye(P)},We(f.year,f.month)}function yt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function je(t,l,f){return Hl(t,l,f,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Te(t,l){const f=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(f.length===0)return Oe();const P=f[f.length-1],x=je(P.from!==void 0?P.from:P,t,l);return x.dateHash===null?Oe():x}function Oe(){let t,l;if(e.defaultYearMonth!==void 0){const f=e.defaultYearMonth.split("/");t=parseInt(f[0],10),l=parseInt(f[1],10)}else{const f=j.value!==void 0?j.value:i();t=f.year,l=f.month}return{year:t,month:l,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+X(l)+"/01"}}function bt(t){let l=D.value.year,f=Number(D.value.month)+t;f===13?(f=1,l++):f===0&&(f=12,l--),De(l,f),ye.value===!0&&Xe("month")}function Ke(t){const l=Number(D.value.year)+t;De(l,D.value.month),ye.value===!0&&Xe("year")}function St(t){De(t,D.value.month),V.value=e.defaultView==="Years"?"Months":"Calendar",ye.value===!0&&Xe("year")}function Nt(t){De(D.value.year,t),V.value="Calendar",ye.value===!0&&Xe("month")}function ut(t,l){(Ne.value[l]?.includes(t.day)===!0?d:ct)(t)}function ke(t){return{year:t.year,month:t.month,day:t.day}}function De(t,l,f){if(re.value!==null&&t<=re.value.year&&((l<re.value.month||t<re.value.year)&&(l=re.value.month),t=re.value.year),me.value!==null&&t>=me.value.year&&((l>me.value.month||t>me.value.year)&&(l=me.value.month),t=me.value.year),f!==void 0){const{hour:x,minute:Q,second:M,millisecond:E,timezoneOffset:G,timeHash:dt}=f;Object.assign(D.value,{hour:x,minute:Q,second:M,millisecond:E,timezoneOffset:G,timeHash:dt})}const P=t+"/"+X(l)+"/01";P!==D.value.dateHash&&(W.value=D.value.dateHash<P==(n.lang.rtl!==!0)?"left":"right",t!==D.value.year&&(K.value=W.value),Mt(()=>{z.value=t-t%Fe-(t<0?Fe:0),Object.assign(D.value,{year:t,month:l,day:1,dateHash:P})}))}function _t(t,l,f){const P=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:x,details:Q}=wt(l,f);st(P),r("update:modelValue",P,x,Q)}function Xe(t){const l=F.value[0]!==void 0&&F.value[0].dateHash!==null?{...F.value[0]}:{...D.value};Mt(()=>{l.year=D.value.year,l.month=D.value.month;const f=e.calendar!=="persian"?new Date(l.year,l.month,0).getDate():qt(l.year,l.month);l.day=Math.min(Math.max(1,l.day),f);const P=Re(l),{details:x}=wt("",l);st(P),r("update:modelValue",P,t,x)})}function wt(t,l){return l.from!==void 0?{reason:`${t}-range`,details:{...ke(l.target),from:ke(l.from),to:ke(l.to)}}:{reason:`${t}-day`,details:ke(l)}}function Re(t,l,f){return t.from!==void 0?{from:be.value(t.from,l,f),to:be.value(t.to,l,f)}:be.value(t,l,f)}function ct(t){let l;if(e.multiple===!0)if(t.from!==void 0){const f=Ye(t.from),P=Ye(t.to),x=F.value.filter(M=>M.dateHash<f||M.dateHash>P),Q=J.value.filter(({from:M,to:E})=>E.dateHash<f||M.dateHash>P);l=x.concat(Q).concat(t).map(M=>Re(M))}else{const f=fe.value.slice();f.push(Re(t)),l=f}else l=Re(t);_t(l,"add",t)}function d(t){if(e.noUnset===!0)return;let l=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const f=Re(t);t.from!==void 0?l=e.modelValue.filter(P=>P.from!==void 0?P.from!==f.from&&P.to!==f.to:!0):l=e.modelValue.filter(P=>P!==f),l.length===0&&(l=null)}_t(l,"remove",t)}function k(t,l,f){const P=F.value.concat(J.value).map(Q=>Re(Q,t,l)).filter(Q=>Q.from!==void 0?Q.from.dateHash!==null&&Q.to.dateHash!==null:Q.dateHash!==null),x=(e.multiple===!0?P:P[0])||null;st(x),r("update:modelValue",x,f)}function N(){if(e.minimal!==!0)return m("div",{class:"q-date__header "+c.value},[m("div",{class:"relative-position"},[m(Le,{name:"q-transition--fade"},()=>m("div",{key:"h-yr-"+_.value,class:"q-date__header-subtitle q-date__header-link "+(V.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...v("vY",{onClick(){V.value="Years"},onKeyup(t){t.keyCode===13&&(V.value="Years")}})},[_.value]))]),m("div",{class:"q-date__header-title relative-position flex no-wrap"},[m("div",{class:"relative-position col"},[m(Le,{name:"q-transition--fade"},()=>m("div",{key:"h-sub"+qe.value,class:"q-date__header-title-label q-date__header-link "+(V.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...v("vC",{onClick(){V.value="Calendar"},onKeyup(t){t.keyCode===13&&(V.value="Calendar")}})},[qe.value]))]),e.todayBtn===!0?m(he,{class:"q-date__header-today self-start",icon:n.iconSet.datetime.today,"aria-label":n.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:it}):null])])}function B({label:t,type:l,key:f,dir:P,goTo:x,boundaries:Q,cls:M}){return[m("div",{class:"row items-center q-date__arrow"},[m(he,{round:!0,dense:!0,size:"sm",flat:!0,icon:se.value[0],"aria-label":l==="Years"?n.lang.date.prevYear:n.lang.date.prevMonth,tabindex:s.value,disable:Q.prev===!1,...v("go-#"+l,{onClick(){x(-1)}})})]),m("div",{class:"relative-position overflow-hidden flex flex-center"+M},[m(Le,{name:"q-transition--jump-"+P},()=>m("div",{key:f},[m(he,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:s.value,...v("view#"+l,{onClick:()=>{V.value=l}})})]))]),m("div",{class:"row items-center q-date__arrow"},[m(he,{round:!0,dense:!0,size:"sm",flat:!0,icon:se.value[1],"aria-label":l==="Years"?n.lang.date.nextYear:n.lang.date.nextMonth,tabindex:s.value,disable:Q.next===!1,...v("go+#"+l,{onClick(){x(1)}})})])]}const Y={Calendar:()=>[m("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[m("div",{class:"q-date__navigation row items-center no-wrap"},B({label:C.value.months[D.value.month-1],type:"Months",key:D.value.month,dir:W.value,goTo:bt,boundaries:Ve.value.month,cls:" col"}).concat(B({label:D.value.year,type:"Years",key:D.value.year,dir:K.value,goTo:Ke,boundaries:Ve.value.year,cls:""}))),m("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ue.value.map(t=>m("div",{class:"q-date__calendar-item"},[m("div",t)]))),m("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[m(Le,{name:"q-transition--slide-"+W.value},()=>m("div",{key:ge.value,class:"q-date__calendar-days fit"},gt.value.map(t=>m("div",{class:t.classes},[t.in===!0?m(he,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:s.value,...v("day#"+t.i,{onClick:()=>{le(t.i)},onMouseover:()=>{ae(t.i)}})},t.event!==!1?()=>m("div",{class:"q-date__event bg-"+t.event}):null):m("div",""+t.i)]))))])])],Months(){const t=D.value.year===j.value.year,l=P=>re.value!==null&&D.value.year===re.value.year&&re.value.month>P||me.value!==null&&D.value.year===me.value.year&&me.value.month<P,f=C.value.monthsShort.map((P,x)=>{const Q=D.value.month===x+1;return m("div",{class:"q-date__months-item flex flex-center"},[m(he,{class:t===!0&&j.value.month===x+1?"q-date__today":null,flat:Q!==!0,label:P,unelevated:Q,color:Q===!0?de.value:null,textColor:Q===!0?ve.value:null,tabindex:s.value,disable:l(x+1),...v("month#"+x,{onClick:()=>{Nt(x+1)}})})])});return e.yearsInMonthView===!0&&f.unshift(m("div",{class:"row no-wrap full-width"},[B({label:D.value.year,type:"Years",key:D.value.year,dir:K.value,goTo:Ke,boundaries:Ve.value.year,cls:" col"})])),m("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},f)},Years(){const t=z.value,l=t+Fe,f=[],P=x=>re.value!==null&&re.value.year>x||me.value!==null&&me.value.year<x;for(let x=t;x<=l;x++){const Q=D.value.year===x;f.push(m("div",{class:"q-date__years-item flex flex-center"},[m(he,{key:"yr"+x,class:j.value.year===x?"q-date__today":null,flat:!Q,label:x,dense:!0,unelevated:Q,color:Q===!0?de.value:null,textColor:Q===!0?ve.value:null,tabindex:s.value,disable:P(x),...v("yr#"+x,{onClick:()=>{St(x)}})})]))}return m("div",{class:"q-date__view q-date__years flex flex-center"},[m("div",{class:"col-auto"},[m(he,{round:!0,dense:!0,flat:!0,icon:se.value[0],"aria-label":n.lang.date.prevRangeYears(Fe),tabindex:s.value,disable:P(t),...v("y-",{onClick:()=>{z.value-=Fe}})})]),m("div",{class:"q-date__years-content col self-stretch row items-center"},f),m("div",{class:"col-auto"},[m(he,{round:!0,dense:!0,flat:!0,icon:se.value[1],"aria-label":n.lang.date.nextRangeYears(Fe),tabindex:s.value,disable:P(l),...v("y+",{onClick:()=>{z.value+=Fe}})})])])}};function le(t){const l={...D.value,day:t};if(e.range===!1){ut(l,ge.value);return}if(Z.value===null){const f=gt.value.find(x=>x.fill!==!0&&x.i===t);if(e.noUnset!==!0&&f.range!==void 0){d({target:l,from:f.range.from,to:f.range.to});return}if(f.selected===!0){d(l);return}const P=Ye(l);Z.value={init:l,initHash:P,final:l,finalHash:P},r("rangeStart",ke(l))}else{const f=Z.value.initHash,P=Ye(l),x=f<=P?{from:Z.value.init,to:l}:{from:l,to:Z.value.init};Z.value=null,ct(f===P?l:{target:l,...x}),r("rangeEnd",{from:ke(x.from),to:ke(x.to)})}}function ae(t){if(Z.value!==null){const l={...D.value,day:t};Object.assign(Z.value,{final:l,finalHash:Ye(l)})}}return Object.assign(u,{setToday:it,setView:ht,offsetCalendar:Bt,setCalendarTo:We,setEditingRange:Vt}),()=>{const t=[m("div",{class:"q-date__content col relative-position"},[m(Le,{name:"q-transition--fade"},Y[V.value])])],l=pe(a.default);return l!==void 0&&t.push(m("div",{class:"q-date__actions"},l)),e.name!==void 0&&e.disable!==!0&&O(t,"push"),m("div",{class:xe.value,...Ft.value},[N(),m("div",{ref:A,class:"q-date__main col column",tabindex:-1},t)])}}}),jl=Se({name:"QPopupProxy",props:{...Fa,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:a,emit:r,attrs:u}){const{proxy:n}=Ce(),{$q:o}=n,v=$(!1),s=$(null),c=g(()=>parseInt(e.breakpoint,10)),{canShow:h}=ya({showing:v});function i(){return o.screen.width<c.value||o.screen.height<c.value?"dialog":"menu"}const S=$(i()),q=g(()=>S.value==="menu"?{maxHeight:"99vh"}:{});ue(()=>i(),b=>{v.value!==!0&&(S.value=b)});function O(b){v.value=!0,r("show",b)}function A(b){v.value=!1,S.value=i(),r("hide",b)}return Object.assign(n,{show(b){h(b)===!0&&s.value.show(b)},hide(b){s.value.hide(b)},toggle(b){s.value.toggle(b)}}),ze(n,"currentComponent",()=>({type:S.value,ref:s.value})),()=>{const b={ref:s,...q.value,...u,onShow:O,onHide:A};let C;return S.value==="dialog"?C=Wa:(C=Ba,Object.assign(b,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),m(C,b,a.default)}}}),Pt=Se({name:"QBanner",props:{...nt,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:a}){const{proxy:{$q:r}}=Ce(),u=ot(e,r),n=g(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(u.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),o=g(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const v=[m("div",{class:"q-banner__avatar col-auto row items-center self-start"},pe(a.avatar)),m("div",{class:"q-banner__content col text-body2"},pe(a.default))],s=pe(a.action);return s!==void 0&&v.push(m("div",{class:o.value},s)),m("div",{class:n.value+(e.inlineActions===!1&&s!==void 0?" q-banner--top-padding":""),role:"alert"},v)}}});function at(e,a,r,u){const n=[];return e.forEach(o=>{u(o)===!0?n.push(o):a.push({failedPropValidation:r,file:o})}),n}function Dt(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Zt(e)}const Ql={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ll=["rejected"];function zl({editable:e,dnd:a,getFileInput:r,addFilesToQueue:u}){const{props:n,emit:o,proxy:v}=Ce(),s=$(null),c=g(()=>n.accept!==void 0?n.accept.split(",").map(p=>(p=p.trim(),p==="*"?"*/":(p.endsWith("/*")&&(p=p.slice(0,p.length-1)),p.toUpperCase()))):null),h=g(()=>parseInt(n.maxFiles,10)),i=g(()=>parseInt(n.maxTotalSize,10));function S(p){if(e.value)if(p!==Object(p)&&(p={target:null}),p.target?.matches('input[type="file"]')===!0)p.clientX===0&&p.clientY===0&&Ka(p);else{const j=r();j!==p.target&&j?.click(p)}}function q(p){e.value&&p&&u(null,p)}function O(p,j,D,V){let I=Array.from(j||p.target.files);const W=[],K=()=>{W.length!==0&&o("rejected",W)};if(n.accept!==void 0&&c.value.indexOf("*/")===-1&&(I=at(I,W,"accept",H=>c.value.some(z=>H.type.toUpperCase().startsWith(z)||H.name.toUpperCase().endsWith(z))),I.length===0))return K();if(n.maxFileSize!==void 0){const H=parseInt(n.maxFileSize,10);if(I=at(I,W,"max-file-size",z=>z.size<=H),I.length===0)return K()}if(n.multiple!==!0&&I.length!==0&&(I=[I[0]]),I.forEach(H=>{H.__key=H.webkitRelativePath+H.lastModified+H.name+H.size}),V===!0){const H=D.map(z=>z.__key);I=at(I,W,"duplicate",z=>H.includes(z.__key)===!1)}if(I.length===0)return K();if(n.maxTotalSize!==void 0){let H=V===!0?D.reduce((z,Z)=>z+Z.size,0):0;if(I=at(I,W,"max-total-size",z=>(H+=z.size,H<=i.value)),I.length===0)return K()}if(typeof n.filter=="function"){const H=n.filter(I);I=at(I,W,"filter",z=>H.includes(z))}if(n.maxFiles!==void 0){let H=V===!0?D.length:0;if(I=at(I,W,"max-files",()=>(H++,H<=h.value)),I.length===0)return K()}if(K(),I.length!==0)return I}function A(p){Dt(p),a.value!==!0&&(a.value=!0)}function b(p){Zt(p),(p.relatedTarget!==null||Xa.is.safari!==!0?p.relatedTarget!==s.value:document.elementsFromPoint(p.clientX,p.clientY).includes(s.value)===!1)===!0&&(a.value=!1)}function C(p){Dt(p);const j=p.dataTransfer.files;j.length!==0&&u(null,j),a.value=!1}function U(p){if(a.value===!0)return m("div",{ref:s,class:`q-${p}__dnd absolute-full`,onDragenter:Dt,onDragover:Dt,onDragleave:b,onDrop:C})}return Object.assign(v,{pickFiles:S,addFiles:q}),{pickFiles:S,addFiles:q,onDragover:A,onDragleave:b,processFiles:O,getDndNode:U,maxFilesNumber:h,maxTotalSizeNumber:i}}const Ul=Se({name:"QFile",inheritAttrs:!1,props:{...Ga,..._a,...Ql,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Ja,...Ll],setup(e,{slots:a,emit:r,attrs:u}){const{proxy:n}=Ce(),o=el(),v=$(null),s=$(!1),c=tl(e),{pickFiles:h,onDragover:i,onDragleave:S,processFiles:q,getDndNode:O}=zl({editable:o.editable,dnd:s,getFileInput:xe,addFilesToQueue:de}),A=al(e),b=g(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),C=g(()=>aa(b.value)),U=g(()=>b.value.map(F=>F.name).join(", ")),p=g(()=>Va(b.value.reduce((F,J)=>F+J.size,0))),j=g(()=>({totalSize:p.value,filesNumber:b.value.length,maxFiles:e.maxFiles})),D=g(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:c.value,...u,id:o.targetUid.value,disabled:o.editable.value!==!0})),V=g(()=>"q-file q-field--auto-height"+(s.value===!0?" q-file--dnd":"")),I=g(()=>e.multiple===!0&&e.append===!0);function W(F){const J=b.value.slice();J.splice(F,1),H(J)}function K(F){const J=b.value.indexOf(F);J!==-1&&W(J)}function H(F){r("update:modelValue",e.multiple===!0?F:F[0])}function z(F){F.keyCode===13&&nl(F)}function Z(F){(F.keyCode===13||F.keyCode===32)&&h(F)}function xe(){return v.value}function de(F,J){const te=q(F,J,b.value,I.value),be=xe();be!=null&&(be.value=""),te!==void 0&&((e.multiple===!0?e.modelValue&&te.every(ne=>b.value.includes(ne)):e.modelValue===te[0])||H(I.value===!0?b.value.concat(te):te))}function ve(){return[m("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function ye(){if(a.file!==void 0)return b.value.length===0?ve():b.value.map((J,te)=>a.file({index:te,file:J,ref:this}));if(a.selected!==void 0)return b.value.length===0?ve():a.selected({files:b.value,ref:this});if(e.useChips===!0)return b.value.length===0?ve():b.value.map((J,te)=>m(Na,{key:"file-"+te,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{W(te)}},()=>m("span",{class:"ellipsis",textContent:J.name})));const F=e.displayValue!==void 0?e.displayValue:U.value;return F.length!==0?[m("div",{class:e.inputClass,style:e.inputStyle,textContent:F})]:ve()}function fe(){const F={ref:v,...D.value,...A.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:de};return e.multiple===!0&&(F.multiple=!0),m("input",F)}return Object.assign(o,{fieldClass:V,emitValue:H,hasValue:C,inputRef:v,innerValue:b,floatingLabel:g(()=>C.value===!0||aa(e.displayValue)),computedCounter:g(()=>{if(e.counterLabel!==void 0)return e.counterLabel(j.value);const F=e.maxFiles;return`${b.value.length}${F!==void 0?" / "+F:""} (${p.value})`}),getControlChild:()=>O("file"),getControl:()=>{const F={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(F,{onDragover:i,onDragleave:S,onKeydown:z,onKeyup:Z}),m("div",F,[fe()].concat(ye()))}}),Object.assign(n,{removeAtIndex:W,removeFile:K,getNativeElement:()=>v.value}),ze(n,"nativeEl",()=>v.value),ll(o)}}),Zl=Se({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:a,emit:r}){const u=Ce(),{proxy:{$q:n}}=u,o=v=>{r("click",v)};return()=>{if(e.props===void 0)return m("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:o},pe(a.default));let v,s;const c=u.vnode.key;if(c){if(v=e.props.colsMap[c],v===void 0)return}else v=e.props.col;if(v.sortable===!0){const i=v.align==="right"?"unshift":"push";s=ol(a.default,[]),s[i](m(ie,{class:v.__iconClass,name:n.iconSet.table.arrowUp}))}else s=pe(a.default);const h={class:v.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:v.headerStyle,onClick:i=>{v.sortable===!0&&e.props.sort(v),o(i)}};return m("th",h,s)}}}),Wl=["ul","ol"],Kl=Se({name:"QList",props:{...nt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:a}){const r=Ce(),u=ot(e,r.proxy.$q),n=g(()=>Wl.includes(e.tag)?null:"list"),o=g(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(u.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>m(e.tag,{class:o.value,role:n.value},pe(a.default))}}),Xl=["horizontal","vertical","cell","none"],Jl=Se({name:"QMarkupTable",props:{...nt,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Xl.includes(e)}},setup(e,{slots:a}){const r=Ce(),u=ot(e,r.proxy.$q),n=g(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(u.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>m("div",{class:n.value},[m("table",{class:"q-table"},pe(a.default))])}});function Oa(e,a){return m("div",e,[m("table",{class:"q-table"},a)])}const Gl={list:Kl,table:Jl},en=["list","table","__qtable"],tn=Se({name:"QVirtualScroll",props:{...Ra,type:{type:String,default:"list",validator:e=>en.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Ca},setup(e,{slots:a,attrs:r}){let u;const n=$(null),o=g(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:v,localResetVirtualScroll:s,padVirtualScroll:c,onVirtualScrollEvt:h}=Ya({virtualScrollLength:o,getVirtualScrollTarget:A,getVirtualScrollEl:O}),i=g(()=>{if(o.value===0)return[];const p=(j,D)=>({index:v.value.from+D,item:j});return e.itemsFn===void 0?e.items.slice(v.value.from,v.value.to).map(p):e.itemsFn(v.value.from,v.value.to-v.value.from).map(p)}),S=g(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),q=g(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ue(o,()=>{s()}),ue(()=>e.scrollTarget,()=>{C(),b()});function O(){return n.value.$el||n.value}function A(){return u}function b(){u=Pa(O(),e.scrollTarget),u.addEventListener("scroll",h,la.passive)}function C(){u!==void 0&&(u.removeEventListener("scroll",h,la.passive),u=void 0)}function U(){let p=c(e.type==="list"?"div":"tbody",i.value.map(a.default));return a.before!==void 0&&(p=a.before().concat(p)),Kt(a.after,p)}return Da(()=>{s()}),Wt(()=>{b()}),rl(()=>{b()}),sl(()=>{C()}),mt(()=>{C()}),()=>{if(a.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Oa({ref:n,class:"q-table__middle "+S.value},U()):m(Gl[e.type],{...r,ref:n,class:[r.class,S.value],...q.value},U)}}}),an={xs:2,sm:4,md:6,lg:10,xl:14};function fa(e,a,r){return{transform:a===!0?`translateX(${r.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const ln=Se({name:"QLinearProgress",props:{...nt,...il,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:a}){const{proxy:r}=Ce(),u=ot(e,r.$q),n=ul(e,an),o=g(()=>e.indeterminate===!0||e.query===!0),v=g(()=>e.reverse!==e.query),s=g(()=>({...n.value!==null?n.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),c=g(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),h=g(()=>fa(e.buffer!==void 0?e.buffer:1,v.value,r.$q)),i=g(()=>`with${e.instantFeedback===!0?"out":""}-transition`),S=g(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${i.value} q-linear-progress__track--${u.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),q=g(()=>fa(o.value===!0?1:e.value,v.value,r.$q)),O=g(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${i.value} q-linear-progress__model--${o.value===!0?"in":""}determinate`),A=g(()=>({width:`${e.value*100}%`})),b=g(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${i.value}`);return()=>{const C=[m("div",{class:S.value,style:h.value}),m("div",{class:O.value,style:q.value})];return e.stripe===!0&&o.value===!1&&C.push(m("div",{class:b.value,style:A.value})),m("div",{class:c.value,style:s.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Kt(a.default,C))}}});let ft=0;const nn={fullscreen:Boolean,noRouteFullscreenExit:Boolean},on=["update:fullscreen","fullscreen"];function rn(){const e=Ce(),{props:a,emit:r,proxy:u}=e;let n,o,v;const s=$(!1);cl(e)===!0&&ue(()=>u.$route.fullPath,()=>{a.noRouteFullscreenExit!==!0&&i()}),ue(()=>a.fullscreen,S=>{s.value!==S&&c()}),ue(s,S=>{r("update:fullscreen",S),r("fullscreen",S)});function c(){s.value===!0?i():h()}function h(){s.value!==!0&&(s.value=!0,v=u.$el.parentNode,v.replaceChild(o,u.$el),document.body.appendChild(u.$el),ft++,ft===1&&document.body.classList.add("q-body--fullscreen-mixin"),n={handler:i},na.add(n))}function i(){s.value===!0&&(n!==void 0&&(na.remove(n),n=void 0),v.replaceChild(u.$el,o),s.value=!1,ft=Math.max(0,ft-1),ft===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),u.$el.scrollIntoView!==void 0&&setTimeout(()=>{u.$el.scrollIntoView()})))}return Da(()=>{o=document.createElement("span")}),Wt(()=>{a.fullscreen===!0&&h()}),mt(i),Object.assign(u,{toggleFullscreen:c,setFullscreen:h,exitFullscreen:i}),{inFullscreen:s,toggleFullscreen:c}}function sn(e,a){return new Date(e)-new Date(a)}const un={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function cn(e,a,r,u){const n=g(()=>{const{sortBy:s}=a.value;return s&&r.value.find(c=>c.name===s)||null}),o=g(()=>e.sortMethod!==void 0?e.sortMethod:(s,c,h)=>{const i=r.value.find(O=>O.name===c);if(i===void 0||i.field===void 0)return s;const S=h===!0?-1:1,q=typeof i.field=="function"?O=>i.field(O):O=>O[i.field];return s.sort((O,A)=>{let b=q(O),C=q(A);return i.rawSort!==void 0?i.rawSort(b,C,O,A)*S:b==null?-1*S:C==null?1*S:i.sort!==void 0?i.sort(b,C,O,A)*S:zt(b)===!0&&zt(C)===!0?(b-C)*S:oa(b)===!0&&oa(C)===!0?sn(b,C)*S:typeof b=="boolean"&&typeof C=="boolean"?(b-C)*S:([b,C]=[b,C].map(U=>(U+"").toLocaleString().toLowerCase()),b<C?-1*S:b===C?0:S)})});function v(s){let c=e.columnSortOrder;if(wa(s)===!0)s.sortOrder&&(c=s.sortOrder),s=s.name;else{const S=r.value.find(q=>q.name===s);S?.sortOrder&&(c=S.sortOrder)}let{sortBy:h,descending:i}=a.value;h!==s?(h=s,i=c==="da"):e.binaryStateSort===!0?i=!i:i===!0?c==="ad"?h=null:i=!1:c==="ad"?i=!0:h=null,u({sortBy:h,descending:i,page:1})}return{columnToSort:n,computedSortMethod:o,sort:v}}const dn={filter:[String,Object],filterMethod:Function};function vn(e,a){const r=g(()=>e.filterMethod!==void 0?e.filterMethod:(u,n,o,v)=>{const s=n?n.toLowerCase():"";return u.filter(c=>o.some(h=>{const i=v(h,c)+"";return(i==="undefined"||i==="null"?"":i.toLowerCase()).indexOf(s)!==-1}))});return ue(()=>e.filter,()=>{Mt(()=>{a({page:1},!0)})},{deep:!0}),{computedFilterMethod:r}}function fn(e,a){for(const r in a)if(a[r]!==e[r])return!1;return!0}function ma(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const mn={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function gn(e,a){const{props:r,emit:u}=e,n=$(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:r.rowsPerPageOptions.length!==0?r.rowsPerPageOptions[0]:5},r.pagination)),o=g(()=>{const i=r["onUpdate:pagination"]!==void 0?{...n.value,...r.pagination}:n.value;return ma(i)}),v=g(()=>o.value.rowsNumber!==void 0);function s(i){c({pagination:i,filter:r.filter})}function c(i={}){Mt(()=>{u("request",{pagination:i.pagination||o.value,filter:i.filter||r.filter,getCellValue:a})})}function h(i,S){const q=ma({...o.value,...i});if(fn(o.value,q)===!0){v.value===!0&&S===!0&&s(q);return}if(v.value===!0){s(q);return}r.pagination!==void 0&&r["onUpdate:pagination"]!==void 0?u("update:pagination",q):n.value=q}return{innerPagination:n,computedPagination:o,isServerSide:v,requestServerInteraction:c,setPagination:h}}function hn(e,a,r,u,n,o){const{props:v,emit:s,proxy:{$q:c}}=e,h=g(()=>u.value===!0?r.value.rowsNumber||0:o.value),i=g(()=>{const{page:D,rowsPerPage:V}=r.value;return(D-1)*V}),S=g(()=>{const{page:D,rowsPerPage:V}=r.value;return D*V}),q=g(()=>r.value.page===1),O=g(()=>r.value.rowsPerPage===0?1:Math.max(1,Math.ceil(h.value/r.value.rowsPerPage))),A=g(()=>S.value===0?!0:r.value.page>=O.value),b=g(()=>(v.rowsPerPageOptions.includes(a.value.rowsPerPage)?v.rowsPerPageOptions:[a.value.rowsPerPage].concat(v.rowsPerPageOptions)).map(V=>({label:V===0?c.lang.table.allRows:""+V,value:V})));ue(O,(D,V)=>{if(D===V)return;const I=r.value.page;D&&!I?n({page:1}):D<I&&n({page:D})});function C(){n({page:1})}function U(){const{page:D}=r.value;D>1&&n({page:D-1})}function p(){const{page:D,rowsPerPage:V}=r.value;S.value>0&&D*V<h.value&&n({page:D+1})}function j(){n({page:O.value})}return v["onUpdate:pagination"]!==void 0&&s("update:pagination",{...r.value}),{firstRowIndex:i,lastRowIndex:S,isFirstPage:q,isLastPage:A,pagesNumber:O,computedRowsPerPageOptions:b,computedRowsNumber:h,firstPage:C,prevPage:U,nextPage:p,lastPage:j}}const yn={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},bn=["update:selected","selection"];function Sn(e,a,r,u){const n=g(()=>{const A={};return e.selected.map(u.value).forEach(b=>{A[b]=!0}),A}),o=g(()=>e.selection!=="none"),v=g(()=>e.selection==="single"),s=g(()=>e.selection==="multiple"),c=g(()=>r.value.length!==0&&r.value.every(A=>n.value[u.value(A)]===!0)),h=g(()=>c.value!==!0&&r.value.some(A=>n.value[u.value(A)]===!0)),i=g(()=>e.selected.length);function S(A){return n.value[A]===!0}function q(){a("update:selected",[])}function O(A,b,C,U){a("selection",{rows:b,added:C,keys:A,evt:U});const p=v.value===!0?C===!0?b:[]:C===!0?e.selected.concat(b):e.selected.filter(j=>A.includes(u.value(j))===!1);a("update:selected",p)}return{hasSelectionMode:o,singleSelection:v,multipleSelection:s,allRowsSelected:c,someRowsSelected:h,rowsSelectedNumber:i,isRowSelected:S,clearSelection:q,updateSelection:O}}function ga(e){return Array.isArray(e)?e.slice():[]}const _n={expanded:Array},wn=["update:expanded"];function Cn(e,a){const r=$(ga(e.expanded));ue(()=>e.expanded,v=>{r.value=ga(v)});function u(v){return r.value.includes(v)}function n(v){e.expanded!==void 0?a("update:expanded",v):r.value=v}function o(v,s){const c=r.value.slice(),h=c.indexOf(v);s===!0?h===-1&&(c.push(v),n(c)):h!==-1&&(c.splice(h,1),n(c))}return{isRowExpanded:u,setExpanded:n,updateExpanded:o}}const Pn={visibleColumns:Array};function Dn(e,a,r){const u=g(()=>{if(e.columns!==void 0)return e.columns;const s=e.rows[0];return s!==void 0?Object.keys(s).map(c=>({name:c,label:c.toUpperCase(),field:c,align:zt(s[c])?"right":"left",sortable:!0})):[]}),n=g(()=>{const{sortBy:s,descending:c}=a.value;return(e.visibleColumns!==void 0?u.value.filter(i=>i.required===!0||e.visibleColumns.includes(i.name)===!0):u.value).map(i=>{const S=i.align||"right",q=`text-${S}`;return{...i,align:S,__iconClass:`q-table__sort-icon q-table__sort-icon--${S}`,__thClass:q+(i.headerClasses!==void 0?" "+i.headerClasses:"")+(i.sortable===!0?" sortable":"")+(i.name===s?` sorted ${c===!0?"sort-desc":""}`:""),__tdStyle:i.style!==void 0?typeof i.style!="function"?()=>i.style:i.style:()=>null,__tdClass:i.classes!==void 0?typeof i.classes!="function"?()=>q+" "+i.classes:O=>q+" "+i.classes(O):()=>q}})}),o=g(()=>{const s={};return n.value.forEach(c=>{s[c.name]=c}),s}),v=g(()=>e.tableColspan!==void 0?e.tableColspan:n.value.length+(r.value===!0?1:0));return{colList:u,computedCols:n,computedColsMap:o,computedColspan:v}}const pt="q-table__bottom row items-center",Aa={};ba.forEach(e=>{Aa[e]={}});const ha=Se({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...Aa,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...nt,...nn,...Pn,...dn,...mn,..._n,...yn,...un},emits:["request","virtualScroll",...on,...wn,...bn],setup(e,{slots:a,emit:r}){const u=Ce(),{proxy:{$q:n}}=u,o=ot(e,n),{inFullscreen:v,toggleFullscreen:s}=rn(),c=g(()=>typeof e.rowKey=="function"?e.rowKey:d=>d[e.rowKey]),h=$(null),i=$(null),S=g(()=>e.grid!==!0&&e.virtualScroll===!0),q=g(()=>" q-table__card"+(o.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),O=g(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":q.value)+(o.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(v.value===!0?" fullscreen scroll":"")),A=g(()=>O.value+(e.loading===!0?" q-table--loading":""));ue(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+O.value,()=>{S.value===!0&&i.value?.reset()});const{innerPagination:b,computedPagination:C,isServerSide:U,requestServerInteraction:p,setPagination:j}=gn(u,Te),{computedFilterMethod:D}=vn(e,j),{isRowExpanded:V,setExpanded:I,updateExpanded:W}=Cn(e,r),K=g(()=>{let d=e.rows;if(U.value===!0||d.length===0)return d;const{sortBy:k,descending:N}=C.value;return e.filter&&(d=D.value(d,e.filter,ne.value,Te)),y.value!==null&&(d=_.value(e.rows===d?d.slice():d,k,N)),d}),H=g(()=>K.value.length),z=g(()=>{let d=K.value;if(U.value===!0)return d;const{rowsPerPage:k}=C.value;return k!==0&&($e.value===0&&e.rows!==d?d.length>Ue.value&&(d=d.slice(0,Ue.value)):d=d.slice($e.value,Ue.value)),d}),{hasSelectionMode:Z,singleSelection:xe,multipleSelection:de,allRowsSelected:ve,someRowsSelected:ye,rowsSelectedNumber:fe,isRowSelected:F,clearSelection:J,updateSelection:te}=Sn(e,r,z,c),{colList:be,computedCols:ne,computedColsMap:qe,computedColspan:w}=Dn(e,C,Z),{columnToSort:y,computedSortMethod:_,sort:se}=cn(e,C,be,j),{firstRowIndex:$e,lastRowIndex:Ue,isFirstPage:Pe,isLastPage:rt,pagesNumber:re,computedRowsPerPageOptions:me,computedRowsNumber:Ve,firstPage:Ne,prevPage:Ze,nextPage:Me,lastPage:ge}=hn(u,b,C,U,j,H),Tt=g(()=>z.value.length===0),Ot=g(()=>{const d={};return ba.forEach(k=>{d[k]=e[k]}),d.virtualScrollItemSize===void 0&&(d.virtualScrollItemSize=e.dense===!0?28:48),d});function At(){S.value===!0&&i.value.reset()}function gt(){if(e.grid===!0)return ct();const d=e.hideHeader!==!0?St:null;if(S.value===!0){const N=a["top-row"],B=a["bottom-row"],Y={default:le=>ht(le.item,a.body,le.index)};if(N!==void 0){const le=m("tbody",N({cols:ne.value}));Y.before=d===null?()=>le:()=>[d()].concat(le)}else d!==null&&(Y.before=d);return B!==void 0&&(Y.after=()=>m("tbody",B({cols:ne.value}))),m(tn,{ref:i,class:e.tableClass,style:e.tableStyle,...Ot.value,scrollTarget:e.virtualScrollTarget,items:z.value,type:"__qtable",tableColspan:w.value,onVirtualScroll:st},Y)}const k=[Bt()];return d!==null&&k.unshift(d()),Oa({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},k)}function Ft(d,k){if(i.value!==null){i.value.scrollTo(d,k);return}d=parseInt(d,10);const N=h.value.querySelector(`tbody tr:nth-of-type(${d+1})`);if(N!==null){const B=h.value.querySelector(".q-table__middle.scroll"),Y=N.offsetTop-e.virtualScrollStickySizeStart,le=Y<B.scrollTop?"decrease":"increase";B.scrollTop=Y,r("virtualScroll",{index:d,from:0,to:b.value.rowsPerPage-1,direction:le})}}function st(d){r("virtualScroll",d)}function it(){return[m(ln,{class:"q-table__linear-progress",color:e.color,dark:o.value,indeterminate:!0,trackColor:"transparent"})]}function ht(d,k,N){const B=c.value(d),Y=F(B);if(k!==void 0){const l={key:B,row:d,pageIndex:N,__trClass:Y?"selected":""};if(e.tableRowStyleFn!==void 0&&(l.__trStyle=e.tableRowStyleFn(d)),e.tableRowClassFn!==void 0){const f=e.tableRowClassFn(d);f&&(l.__trClass=`${f} ${l.__trClass}`)}return k(We(l))}const le=a["body-cell"],ae=ne.value.map(l=>{const f=a[`body-cell-${l.name}`],P=f!==void 0?f:le;return P!==void 0?P(Vt({key:B,row:d,pageIndex:N,col:l})):m("td",{class:l.__tdClass(d),style:l.__tdStyle(d)},Te(l,d))});if(Z.value===!0){const l=a["body-selection"],f=l!==void 0?l(yt({key:B,row:d,pageIndex:N})):[m(Rt,{modelValue:Y,color:e.color,dark:o.value,dense:e.dense,"onUpdate:modelValue":(P,x)=>{te([B],[d],P,x)}})];ae.unshift(m("td",{class:"q-table--col-auto-width"},f))}const t={key:B,class:{selected:Y}};if(e.onRowClick!==void 0&&(t.class["cursor-pointer"]=!0,t.onClick=l=>{r("rowClick",l,d,N)}),e.onRowDblclick!==void 0&&(t.class["cursor-pointer"]=!0,t.onDblclick=l=>{r("rowDblclick",l,d,N)}),e.onRowContextmenu!==void 0&&(t.class["cursor-pointer"]=!0,t.onContextmenu=l=>{r("rowContextmenu",l,d,N)}),e.tableRowStyleFn!==void 0&&(t.style=e.tableRowStyleFn(d)),e.tableRowClassFn!==void 0){const l=e.tableRowClassFn(d);l&&(t.class[l]=!0)}return m("tr",t,ae)}function Bt(){const d=a.body,k=a["top-row"],N=a["bottom-row"];let B=z.value.map((Y,le)=>ht(Y,d,le));return k!==void 0&&(B=k({cols:ne.value}).concat(B)),N!==void 0&&(B=B.concat(N({cols:ne.value}))),m("tbody",B)}function We(d){return je(d),d.cols=d.cols.map(k=>ze({...k},"value",()=>Te(k,d.row))),d}function Vt(d){return je(d),ze(d,"value",()=>Te(d.col,d.row)),d}function yt(d){return je(d),d}function je(d){Object.assign(d,{cols:ne.value,colsMap:qe.value,sort:se,rowIndex:$e.value+d.pageIndex,color:e.color,dark:o.value,dense:e.dense}),Z.value===!0&&ze(d,"selected",()=>F(d.key),(k,N)=>{te([d.key],[d.row],k,N)}),ze(d,"expand",()=>V(d.key),k=>{W(d.key,k)})}function Te(d,k){const N=typeof d.field=="function"?d.field(k):k[d.field];return d.format!==void 0?d.format(N,k):N}const Oe=g(()=>({pagination:C.value,pagesNumber:re.value,isFirstPage:Pe.value,isLastPage:rt.value,firstPage:Ne,prevPage:Ze,nextPage:Me,lastPage:ge,inFullscreen:v.value,toggleFullscreen:s}));function bt(){const d=a.top,k=a["top-left"],N=a["top-right"],B=a["top-selection"],Y=Z.value===!0&&B!==void 0&&fe.value>0,le="q-table__top relative-position row items-center";if(d!==void 0)return m("div",{class:le},[d(Oe.value)]);let ae;if(Y===!0?ae=B(Oe.value).slice():(ae=[],k!==void 0?ae.push(m("div",{class:"q-table__control"},[k(Oe.value)])):e.title&&ae.push(m("div",{class:"q-table__control"},[m("div",{class:["q-table__title",e.titleClass]},e.title)]))),N!==void 0&&(ae.push(m("div",{class:"q-table__separator col"})),ae.push(m("div",{class:"q-table__control"},[N(Oe.value)]))),ae.length!==0)return m("div",{class:le},ae)}const Ke=g(()=>ye.value===!0?null:ve.value);function St(){const d=Nt();return e.loading===!0&&a.loading===void 0&&d.push(m("tr",{class:"q-table__progress"},[m("th",{class:"relative-position",colspan:w.value},it())])),m("thead",d)}function Nt(){const d=a.header,k=a["header-cell"];if(d!==void 0)return d(ut({header:!0})).slice();const N=ne.value.map(B=>{const Y=a[`header-cell-${B.name}`],le=Y!==void 0?Y:k,ae=ut({col:B});return le!==void 0?le(ae):m(Zl,{key:B.name,props:ae},()=>B.label)});if(xe.value===!0&&e.grid!==!0)N.unshift(m("th",{class:"q-table--col-auto-width"}," "));else if(de.value===!0){const B=a["header-selection"],Y=B!==void 0?B(ut({})):[m(Rt,{color:e.color,modelValue:Ke.value,dark:o.value,dense:e.dense,"onUpdate:modelValue":ke})];N.unshift(m("th",{class:"q-table--col-auto-width"},Y))}return[m("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},N)]}function ut(d){return Object.assign(d,{cols:ne.value,sort:se,colsMap:qe.value,color:e.color,dark:o.value,dense:e.dense}),de.value===!0&&ze(d,"selected",()=>Ke.value,ke),d}function ke(d){ye.value===!0&&(d=!1),te(z.value.map(c.value),z.value,d)}const De=g(()=>{const d=[e.iconFirstPage||n.iconSet.table.firstPage,e.iconPrevPage||n.iconSet.table.prevPage,e.iconNextPage||n.iconSet.table.nextPage,e.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?d.reverse():d});function _t(){if(e.hideBottom===!0)return;if(Tt.value===!0){if(e.hideNoData===!0)return;const N=e.loading===!0?e.loadingLabel||n.lang.table.loading:e.filter?e.noResultsLabel||n.lang.table.noResults:e.noDataLabel||n.lang.table.noData,B=a["no-data"],Y=B!==void 0?[B({message:N,icon:n.iconSet.table.warning,filter:e.filter})]:[m(ie,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),N];return m("div",{class:pt+" q-table__bottom--nodata"},Y)}const d=a.bottom;if(d!==void 0)return m("div",{class:pt},[d(Oe.value)]);const k=e.hideSelectedBanner!==!0&&Z.value===!0&&fe.value>0?[m("div",{class:"q-table__control"},[m("div",[(e.selectedRowsLabel||n.lang.table.selectedRecords)(fe.value)])])]:[];if(e.hidePagination!==!0)return m("div",{class:pt+" justify-end"},wt(k));if(k.length!==0)return m("div",{class:pt},k)}function Xe(d){j({page:1,rowsPerPage:d.value})}function wt(d){let k;const{rowsPerPage:N}=C.value,B=e.paginationLabel||n.lang.table.pagination,Y=a.pagination,le=e.rowsPerPageOptions.length>1;if(d.push(m("div",{class:"q-table__separator col"})),le===!0&&d.push(m("div",{class:"q-table__control"},[m("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||n.lang.table.recordsPerPage]),m(Lt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:N,options:me.value,displayValue:N===0?n.lang.table.allRows:N,dark:o.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Xe})])),Y!==void 0)k=Y(Oe.value);else if(k=[m("span",N!==0?{class:"q-table__bottom-item"}:{},[N?B($e.value+1,Math.min(Ue.value,Ve.value),Ve.value):B(1,H.value,Ve.value)])],N!==0&&re.value>1){const ae={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(ae.size="sm"),re.value>2&&k.push(m(he,{key:"pgFirst",...ae,icon:De.value[0],disable:Pe.value,"aria-label":n.lang.pagination.first,onClick:Ne})),k.push(m(he,{key:"pgPrev",...ae,icon:De.value[1],disable:Pe.value,"aria-label":n.lang.pagination.prev,onClick:Ze}),m(he,{key:"pgNext",...ae,icon:De.value[2],disable:rt.value,"aria-label":n.lang.pagination.next,onClick:Me})),re.value>2&&k.push(m(he,{key:"pgLast",...ae,icon:De.value[3],disable:rt.value,"aria-label":n.lang.pagination.last,onClick:ge}))}return d.push(m("div",{class:"q-table__control"},k)),d}function Re(){const d=e.gridHeader===!0?[m("table",{class:"q-table"},[St()])]:e.loading===!0&&a.loading===void 0?it():void 0;return m("div",{class:"q-table__middle"},d)}function ct(){const d=a.item!==void 0?a.item:k=>{const N=k.cols.map(Y=>m("div",{class:"q-table__grid-item-row"},[m("div",{class:"q-table__grid-item-title"},[Y.label]),m("div",{class:"q-table__grid-item-value"},[Y.value])]));if(Z.value===!0){const Y=a["body-selection"],le=Y!==void 0?Y(k):[m(Rt,{modelValue:k.selected,color:e.color,dark:o.value,dense:e.dense,"onUpdate:modelValue":(ae,t)=>{te([k.key],[k.row],ae,t)}})];N.unshift(m("div",{class:"q-table__grid-item-row"},le),m(kt,{dark:o.value}))}const B={class:["q-table__grid-item-card"+q.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(B.style=[B.style,e.cardStyleFn(k.row)]),e.cardClassFn!==void 0){const Y=e.cardClassFn(k.row);Y&&(B.class[0]+=` ${Y}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(B.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(B.onClick=Y=>{r("RowClick",Y,k.row,k.pageIndex)}),e.onRowDblclick!==void 0&&(B.onDblclick=Y=>{r("RowDblclick",Y,k.row,k.pageIndex)}),e.onRowContextmenu!==void 0&&(B.onContextmenu=Y=>{r("rowContextmenu",Y,k.row,k.pageIndex)})),m("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(k.selected===!0?" q-table__grid-item--selected":"")},[m("div",B,N)])};return m("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},z.value.map((k,N)=>d(We({key:c.value(k),row:k,pageIndex:N}))))}return Object.assign(u.proxy,{requestServerInteraction:p,setPagination:j,firstPage:Ne,prevPage:Ze,nextPage:Me,lastPage:ge,isRowSelected:F,clearSelection:J,isRowExpanded:V,setExpanded:I,sort:se,resetVirtualScroll:At,scrollTo:Ft,getCellValue:Te}),dl(u.proxy,{filteredSortedRows:()=>K.value,computedRows:()=>z.value,computedRowsNumber:()=>Ve.value}),()=>{const d=[bt()],k={ref:h,class:A.value};return e.grid===!0?d.push(Re()):Object.assign(k,{class:[k.class,e.cardClass],style:e.cardStyle}),d.push(gt(),_t()),e.loading===!0&&a.loading!==void 0&&d.push(a.loading()),m("div",k,d)}}}),pn=Se({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:a,emit:r}){let u=!1,n,o,v=null,s=null,c,h;function i(){n?.(),n=null,u=!1,v!==null&&(clearTimeout(v),v=null),s!==null&&(clearTimeout(s),s=null),o?.removeEventListener("transitionend",c),c=null}function S(b,C,U){C!==void 0&&(b.style.height=`${C}px`),b.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,u=!0,n=U}function q(b,C){b.style.overflowY=null,b.style.height=null,b.style.transition=null,i(),C!==h&&r(C)}function O(b,C){let U=0;o=b,u===!0?(i(),U=b.offsetHeight===b.scrollHeight?0:void 0):(h="hide",b.style.overflowY="hidden"),S(b,U,C),v=setTimeout(()=>{v=null,b.style.height=`${b.scrollHeight}px`,c=p=>{s=null,(Object(p)!==p||p.target===b)&&q(b,"show")},b.addEventListener("transitionend",c),s=setTimeout(c,e.duration*1.1)},100)}function A(b,C){let U;o=b,u===!0?i():(h="show",b.style.overflowY="hidden",U=b.scrollHeight),S(b,U,C),v=setTimeout(()=>{v=null,b.style.height=0,c=p=>{s=null,(Object(p)!==p||p.target===b)&&q(b,"hide")},b.addEventListener("transitionend",c),s=setTimeout(c,e.duration*1.1)},100)}return mt(()=>{u===!0&&i()}),()=>m(Le,{css:!1,appear:e.appear,onEnter:O,onLeave:A},a.default)}}),xn=["top","middle","bottom"],lt=Se({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>xn.includes(e)}},setup(e,{slots:a}){const r=g(()=>e.align!==void 0?{verticalAlign:e.align}:null),u=g(()=>{const n=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(n!==void 0?` text-${n}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>m("div",{class:u.value,style:r.value,role:"status","aria-label":e.label},Kt(a.default,e.label!==void 0?[e.label]:[]))}}),xt=Se({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const r=Ce(),u=g(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return m("td",{class:u.value},pe(a.default));const n=r.vnode.key,o=(e.props.colsMap!==void 0?e.props.colsMap[n]:null)||e.props.col;if(o===void 0)return;const{row:v}=e.props;return m("td",{class:u.value+o.__tdClass(v),style:o.__tdStyle(v)},pe(a.default))}}}),kn=Se({name:"QTooltip",inheritAttrs:!1,props:{...Ia,...fl,...Yt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Yt.transitionShow,default:"jump-down"},transitionHide:{...Yt.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Jt},self:{type:String,default:"top middle",validator:Jt},offset:{type:Array,default:()=>[14,14],validator:Ha},scrollTarget:Ca,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...vl],setup(e,{slots:a,emit:r,attrs:u}){let n,o;const v=Ce(),{proxy:{$q:s}}=v,c=$(null),h=$(!1),i=g(()=>Gt(e.anchor,s.lang.rtl)),S=g(()=>Gt(e.self,s.lang.rtl)),q=g(()=>e.persistent!==!0),{registerTick:O,removeTick:A}=ml(),{registerTimeout:b}=gl(),{transitionProps:C,transitionStyle:U}=hl(e),{localScrollTarget:p,changeScrollEvent:j,unconfigureScrollTarget:D}=Ea(e,be),{anchorEl:V,canShow:I,anchorEvents:W}=ya({showing:h,configureAnchorEl:te}),{show:K,hide:H}=yl({showing:h,canShow:I,handleShow:de,handleHide:ve,hideOnRouteChange:q,processOnMount:!0});Object.assign(W,{delayShow:F,delayHide:J});const{showPortal:z,hidePortal:Z,renderPortal:xe}=bl(v,c,qe,"tooltip");if(s.platform.is.mobile===!0){const w={anchorEl:V,innerRef:c,onClickOutside(_){return H(_),_.target.classList.contains("q-dialog__backdrop")&&Zt(_),!0}},y=g(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);ue(y,_=>{(_===!0?$a:ea)(w)}),mt(()=>{ea(w)})}function de(w){z(),O(()=>{o=new MutationObserver(()=>fe()),o.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),fe(),be()}),n===void 0&&(n=ue(()=>s.screen.width+"|"+s.screen.height+"|"+e.self+"|"+e.anchor+"|"+s.lang.rtl,fe)),b(()=>{z(!0),r("show",w)},e.transitionDuration)}function ve(w){A(),Z(),ye(),b(()=>{Z(!0),r("hide",w)},e.transitionDuration)}function ye(){o!==void 0&&(o.disconnect(),o=void 0),n!==void 0&&(n(),n=void 0),D(),ra(W,"tooltipTemp")}function fe(){ja({targetEl:c.value,offset:e.offset,anchorEl:V.value,anchorOrigin:i.value,selfOrigin:S.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function F(w){if(s.platform.is.mobile===!0){ta(),document.body.classList.add("non-selectable");const y=V.value,_=["touchmove","touchcancel","touchend","click"].map(se=>[y,se,"delayHide","passiveCapture"]);sa(W,"tooltipTemp",_)}b(()=>{K(w)},e.delay)}function J(w){s.platform.is.mobile===!0&&(ra(W,"tooltipTemp"),ta(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),b(()=>{H(w)},e.hideDelay)}function te(){if(e.noParentEvent===!0||V.value===null)return;const w=s.platform.is.mobile===!0?[[V.value,"touchstart","delayShow","passive"]]:[[V.value,"mouseenter","delayShow","passive"],[V.value,"mouseleave","delayHide","passive"]];sa(W,"anchor",w)}function be(){if(V.value!==null||e.scrollTarget!==void 0){p.value=Pa(V.value,e.scrollTarget);const w=e.noParentEvent===!0?fe:H;j(p.value,w)}}function ne(){return h.value===!0?m("div",{...u,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",u.class],style:[u.style,U.value],role:"tooltip"},pe(a.default)):null}function qe(){return m(Le,C.value,ne)}return mt(ye),Object.assign(v.proxy,{updatePosition:fe}),xe}}),qn=(e,a)=>{const r=e.__vccOpts||e;for(const[u,n]of a)r[u]=n;return r},Mn={},Tn={class:"container bg-white rounded-borders shadow-1 q-pa-md"};function On(e,a){return oe(),Ie("div",Tn,[Sl(e.$slots,"default",{},void 0)])}const Qt=qn(Mn,[["render",On],["__scopeId","data-v-71a6f9c6"]]),An={class:"row q-col-gutter-xl"},Fn={class:"col-6"},Bn={class:"row q-col-gutter-sm"},Vn={class:"col-6"},Nn={class:"col-6"},Rn={class:"col-6"},Yn={class:"col-6"},Hn={class:"col-6"},In={class:"col-6"},En={class:"col-6"},$n={class:"row"},jn={class:"col-12"},Qn={class:"header-section"},Ln={class:"section-title"},zn={class:"text-caption text-grey"},Un={key:0,class:"flex flex-center q-pa-xl"},Zn={key:2,class:"text-grey text-center q-pa-md"},Wn={class:"row"},Kn={class:"col-12"},Xn={class:"row q-col-gutter-md items-center text-body2"},Jn={class:"col-auto"},Gn={class:"col-auto"},eo={class:"col-auto"},to={class:"col-auto"},ao={class:"col-auto"},lo={class:"col-auto"},no={class:"col-auto"},oo={class:"row"},ro={class:"col-12"},so={class:"row q-col-gutter-md text-caption"},io={key:0,class:"col-auto text-red"},uo={key:1,class:"col-auto text-red"},co={key:2,class:"col-auto text-orange"},vo={key:3,class:"col-auto text-orange"},fo={class:"col-auto text-green"},mo={key:0,class:"text-grey"},go={class:"col-auto"},ho={class:"col-12"},yo={class:"header-section"},bo={class:"section-title"},So={class:"flex flex-center"},_o={class:"flex flex-center"},wo={class:"flex flex-center"},Co={class:"flex flex-center"},xo={__name:"ParserPage",setup(e){const a=Qa(),r=g(()=>q.value.length),u=g(()=>q.value.filter(w=>w.CanPostToSAP).length),n=$(null),o=$(""),v=$(null),s=[{label:"Dreamprice",value:"dreamprice"},{label:"Winners",value:"winners"}],c=$(null),h=$({CustomerCode:"",CustomerName:"",PONumber:"",OrderDate:"",DeliveryDate:null,PostingDate:xe(),PostedBy:"",confirmed:"tYES",Pricelist:""}),i=$([]),S=$([]),q=$([]),O=$(!1),A=$(!1),b=$(!1),C=$(null),U=$([]),p=$(!1),j=$(!1),D=[{name:"Barcode",label:"Barcode",field:"Barcode",align:"left"},{name:"ItemCode",label:"Item Code",field:"ItemCode",align:"left"},{name:"Description",label:"PDF Description",field:"Description",align:"left"},{name:"Qty",label:"Qty",field:"Qty",align:"right"},{name:"StockQty",label:"Stock Qty",field:"StockQty",align:"center"},{name:"PricelistStatus",label:"Pricelist",field:"PricelistStatus",align:"center"},{name:"SAPActive",label:"SAP Status",field:"SAPActive",align:"center"},{name:"NotPostToSAP",label:"SAP Rules",field:"NotPostToSAP",align:"center"},{name:"CanPostToSAP",label:"SAP Posting",field:"CanPostToSAP",align:"center"}],V=$({page:1,rowsPerPage:0}),I=$({page:1,rowsPerPage:0}),W=[0,10,25,50,100],K=g(()=>{const w={inactive:0,noItem:0,noStock:0,insufficientStock:0};for(const y of q.value){if(!y.SAPActive){w.inactive++;continue}if(!y.ItemCode){w.noItem++;continue}if(y.StockQty<=0){w.noStock++;continue}y.StockQty<y.Qty&&w.insufficientStock++}return w});ue(q,()=>{console.table(q.value.map(w=>({Barcode:w.Barcode,SAPActive:w.SAPActive,NotPostToSAP:w.NotPostToSAP,CanPostToSAP:w.CanPostToSAP})))}),ue(()=>h.value.CustomerCode,()=>{v.value=null,c.value=null,S.value=[],i.value=[],q.value=[]});const H=g(()=>!!h.value.CustomerCode&&!!h.value.CustomerName&&!!h.value.PostingDate&&!!h.value.DeliveryDate);function z(w){Z(w),n.value?.hide()}function Z(w){if(!w||!h.value.PostingDate){o.value="";return}w<h.value.PostingDate?o.value="Delivery Date must be the same as or later than Posting Date":o.value=""}function xe(){return new Date().toISOString().slice(0,10)}function de(w){return w.StockQty<=0?"No stock available":w.StockQty<w.Qty?"Insufficient stock":w.PricelistStatus==="NO_PRICELIST"?"No price defined for customer pricelist":"Business rules OK"}const ve=g(()=>j.value?q.value.filter(w=>!w.CanPostToSAP):q.value);function ye(w){return w.SAPActive===!1?"row-sap-inactive":w.NotPostToSAP===!0?"row-business-blocked":w.CanPostToSAP===!0?"row-postable":""}Wt(async()=>{h.value.PostedBy=localStorage.getItem("username")||"SYSTEM";try{const w=await vt.get("/api/customers/codes");console.log(w.data.rows),U.value=w.data.rows.map(y=>({label:`${y.CardCode} - ${y.CardName}`,value:y.CardCode}))}catch{a.notify({type:"negative",message:"Failed loading customer list"})}});const fe=async w=>{if(w)try{const y=await vt.get(`/api/customers/${w}`);h.value.CustomerCode=w,h.value.CustomerName=y.data.row?.CardName||"Unknown",h.value.Pricelist=y.data.row?.Pricelist??0}catch{a.notify({type:"negative",message:"Customer lookup failed"})}};function F(){const w=[];for(const y of q.value){if(!y.CanPostToSAP){console.log("â›” SKIPPED SAP LINE",{Barcode:y.Barcode,ItemCode:y.ItemCode,SAPActive:y.SAPActive,StockQty:y.StockQty,Qty:y.Qty,NotPostToSAP:y.NotPostToSAP});continue}const _=Number(y.PostQty??0);if(_<=0){console.log("â›” SKIPPED (INVALID POST QTY)",{Barcode:y.Barcode,PostQty:y.PostQty,StockQty:y.StockQty});continue}w.push({ItemCode:y.ItemCode,Quantity:_}),console.log("âœ… SAP LINE READY",{ItemCode:y.ItemCode,Quantity:_})}return{CardCode:h.value.CustomerCode,DocDueDate:h.value.DeliveryDate,DocDate:h.value.PostingDate,TaxDate:h.value.PostingDate,NumAtCard:h.value.PONumber,Confirmed:h.value.confirmed,DocumentLines:w}}async function J(){const w=F();if(w.DocumentLines.length===0)return a.notify({type:"warning",message:"No valid lines to post to SAP."});b.value=!0;const y=a.notify({message:"Posting to SAPâ€¦",color:"info",spinner:!0,timeout:0,position:"top",group:!1});try{const _=await vt.post("/api/sap/post",w);if(!_.data?.success)throw{response:{data:_.data}};const se=_.data?.sapResponse?.DocNum;y(),a.notify({type:"positive",message:`Posting to SAP successful! DocNum: ${se??"N/A"}`,timeout:6e3})}catch(_){y();const se=te(_?.response?.data,_);a.notify({type:"negative",message:se,timeout:8e3,multiLine:!0})}finally{b.value=!1}}function te(w,y){return w?.sapResponse?.error?.message?.value?w.sapResponse.error.message.value:y?.response?.data?.sapResponse?.error?.message?.value?y.response.data.sapResponse.error.message.value:w?.message?w.message:y?.message||"Operation failed"}const be=()=>{a.dialog({title:"Confirm Save",message:"Are you sure you want to save this document and all line items?",cancel:!0,ok:{label:"Save",color:"primary"}}).onOk(async()=>{try{if(A.value=!0,!h.value.CustomerCode)return A.value=!1,a.notify({type:"negative",message:"Customer Code is mandatory"});if(!q.value.length)return A.value=!1,a.notify({type:"negative",message:"No lines to save"});const w={header:{CustomerCode:h.value.CustomerCode,CustomerName:h.value.CustomerName,PONumber:h.value.PONumber,OrderDate:h.value.OrderDate,DeliveryDate:h.value.DeliveryDate,PostingDate:h.value.PostingDate,PostedBy:h.value.PostedBy||"SYSTEM"},lines:q.value.map(_=>({ItemCode:_.ItemCode,Description:_.DBDescription||_.Description,Barcode:_.Barcode,Quantity:_.Qty||0,UnitPrice:null,POPrice:_.UnitPrice||0,StockQty:_.StockQty||0,SAPActive:_.SAPActive,PricelistStatus:_.PricelistStatus,CanPostToSAP:_.CanPostToSAP}))},y=await vt.post("/api/pdf/save",w);if(!y.data.success)throw new Error(y.data.message);a.notify({type:"positive",message:`Saved successfully! DocEntry: ${y.data.docEntry}, DocNum: ${y.data.docNum}`}),a.dialog({title:"Post to SAP?",message:"Do you want to send this document to SAP now?",cancel:!0,ok:{label:"Post",color:"primary"}}).onOk(J)}catch(w){a.notify({type:"negative",message:"Save failed: "+w.message})}finally{A.value=!1}})},ne=w=>{w&&w.type!=="application/pdf"&&(a.notify({type:"negative",message:"Only PDF files allowed"}),c.value=null)},qe=async()=>{O.value=!0,S.value=[],i.value=[],q.value=[];try{const w=new FormData;w.append("pdf",c.value),w.append("template",v.value),w.append("customerCode",h.value.CustomerCode||""),w.append("pricelist",h.value.Pricelist||"");const _=(await vt.post("/api/extract",w,{headers:{"Content-Type":"multipart/form-data"}})).data;if(!_.success)throw new Error(_.message);const se=_.header||{};h.value.PONumber=se.PONumber||"",se.OrderDate&&(h.value.OrderDate=se.OrderDate),i.value=_.columnsRaw||[],S.value=_.rawRows||[],q.value=_.enrichedRows||[],a.notify({type:"positive",message:"PDF extracted successfully!"})}catch(w){a.notify({type:"negative",message:"Failed: "+w.message})}finally{O.value=!1}};return(w,y)=>(oe(),_e(La,{padding:"",class:"pdf-page"},{default:L(()=>[T(Qt,null,{default:L(()=>[R("div",An,[R("div",Fn,[T(Pt,{rounded:"",class:"q-pa-none"},{default:L(()=>[T(Lt,{outlined:"",dense:"",modelValue:C.value,"onUpdate:modelValue":[y[0]||(y[0]=_=>C.value=_),fe],options:U.value,label:"Customer Code","emit-value":"","map-options":"",class:"q-mb-sm"},null,8,["modelValue","options"]),R("div",Bn,[R("div",Vn,[T(Qe,{outlined:"",dense:"",readonly:"",modelValue:h.value.CustomerCode,"onUpdate:modelValue":y[1]||(y[1]=_=>h.value.CustomerCode=_),label:"Customer Code"},null,8,["modelValue"])]),R("div",Nn,[T(Qe,{outlined:"",dense:"",readonly:"",modelValue:h.value.CustomerName,"onUpdate:modelValue":y[2]||(y[2]=_=>h.value.CustomerName=_),label:"Customer Name"},null,8,["modelValue"])]),R("div",Rn,[T(Qe,{outlined:"",dense:"",readonly:"",modelValue:h.value.PONumber,"onUpdate:modelValue":y[3]||(y[3]=_=>h.value.PONumber=_),label:"PO Number"},null,8,["modelValue"])]),R("div",Yn,[T(Qe,{outlined:"",dense:"",readonly:"",modelValue:h.value.OrderDate,"onUpdate:modelValue":y[4]||(y[4]=_=>h.value.OrderDate=_),label:"Order Date"},null,8,["modelValue"])]),R("div",Hn,[T(Qe,{outlined:"",dense:"",readonly:"",modelValue:h.value.DeliveryDate,"onUpdate:modelValue":y[6]||(y[6]=_=>h.value.DeliveryDate=_),label:"Delivery Date",error:o.value.length>0,"error-message":o.value},{append:L(()=>[T(ie,{name:"event",class:"cursor-pointer"},{default:L(()=>[T(jl,{ref_key:"deliveryDatePopup",ref:n,cover:""},{default:L(()=>[T($l,{modelValue:h.value.DeliveryDate,"onUpdate:modelValue":[y[5]||(y[5]=_=>h.value.DeliveryDate=_),z],mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","error","error-message"])]),R("div",In,[T(Qe,{outlined:"",dense:"",modelValue:h.value.PostingDate,"onUpdate:modelValue":y[7]||(y[7]=_=>h.value.PostingDate=_),label:"Posting Date",mask:"####-##-##",readonly:""},null,8,["modelValue"])]),y[15]||(y[15]=R("div",{class:"col-6"},null,-1)),R("div",En,[T(Qe,{outlined:"",dense:"",readonly:"",modelValue:h.value.PostedBy,"onUpdate:modelValue":y[8]||(y[8]=_=>h.value.PostedBy=_),label:"Posted By"},null,8,["modelValue"])])])]),_:1})]),R("div",{class:_l(["col-6",{"disabled-panel":!H.value}])},[H.value?Je("",!0):(oe(),_e(Pt,{key:0,dense:"",class:"bg-grey-3 text-grey-8 q-mb-sm"},{default:L(()=>[...y[16]||(y[16]=[ce(" Please select a customer before extracting a PDF. ",-1)])]),_:1})),T(Ht,{flat:"",bordered:"",class:"q-pa-none"},{default:L(()=>[T(Ge,null,{default:L(()=>[...y[17]||(y[17]=[R("div",{class:"text-h6"},"ðŸ“„ PDF Data Extraction",-1),R("div",{class:"text-caption text-grey-7"},"Upload your PDF and extract table data",-1)])]),_:1}),T(kt),T(Ge,{class:"q-gutter-md"},{default:L(()=>[T(Lt,{outlined:"",dense:"",modelValue:v.value,"onUpdate:modelValue":y[9]||(y[9]=_=>v.value=_),options:s,label:"Extraction Template","emit-value":"","map-options":"",disable:!H.value},null,8,["modelValue","disable"]),T(Ul,{modelValue:c.value,"onUpdate:modelValue":[y[11]||(y[11]=_=>c.value=_),ne],filled:"","bottom-slots":"",label:"Upload PDF",counter:"",disable:!H.value},{prepend:L(()=>[T(ie,{name:"cloud_upload"})]),append:L(()=>[T(ie,{name:"close",class:"cursor-pointer",onClick:y[10]||(y[10]=wl(_=>c.value=null,["stop","prevent"]))})]),_:1},8,["modelValue","disable"])]),_:1}),T(Cl,{align:"center"},{default:L(()=>[T(he,{label:"Extract",class:"btn-primary-action q-ma-md",icon:"search",loading:O.value,disable:!H.value||!c.value||!v.value,onClick:qe},null,8,["loading","disable"])]),_:1})]),_:1})],2)])]),_:1}),T(Qt,null,{default:L(()=>[R("div",$n,[R("div",jn,[T(Ht,{class:"clean-card q-mt-md"},{default:L(()=>[T(Ge,{class:"row items-center justify-between"},{default:L(()=>[R("div",Qn,[R("div",Ln,[T(ie,{name:"inventory_2",size:"18px"}),y[18]||(y[18]=ce(" Customer PDF Table ",-1))]),R("div",zn,[y[19]||(y[19]=ce(" Template: ",-1)),R("b",null,Ae(v.value),1)])]),T(he,{flat:"",dense:"",icon:p.value?"expand_less":"expand_more",onClick:y[12]||(y[12]=_=>p.value=!p.value),label:p.value?"Hide":"Show"},null,8,["icon","label"])]),_:1}),T(pn,null,{default:L(()=>[Pl(R("div",null,[T(Ge,{class:"q-pa-none"},{default:L(()=>[O.value?(oe(),Ie("div",Un,[T(Dl,{size:"50px",color:"secondary"})])):S.value.length>0?(oe(),_e(ha,{key:1,columns:i.value,rows:S.value,"row-key":"_id",dense:"",flat:"",bordered:"",class:"clean-table erp-table",pagination:V.value,"onUpdate:pagination":y[13]||(y[13]=_=>V.value=_),"rows-per-page-options":W},null,8,["columns","rows","pagination"])):(oe(),Ie("div",Zn,"No raw data extracted yet."))]),_:1})],512),[[pl,p.value]])]),_:1})]),_:1})])])]),_:1}),T(Qt,null,{default:L(()=>[R("div",Wn,[R("div",Kn,[T(Pt,{rounded:"",class:"bg-grey-1"},{default:L(()=>[R("div",Xn,[R("div",Jn,[T(lt,{color:"green"}),y[20]||(y[20]=ce(" SAP Active",-1))]),R("div",Gn,[T(lt,{color:"red"}),y[21]||(y[21]=ce(" SAP Inactive",-1))]),R("div",eo,[T(ie,{name:"check_circle",color:"green",size:"16px"}),y[22]||(y[22]=ce(" Business rules OK ",-1))]),R("div",to,[T(ie,{name:"block",color:"red",size:"16px"}),y[23]||(y[23]=ce(" Blocked by business rules ",-1))]),R("div",ao,[T(ie,{name:"task_alt",color:"green",size:"16px"}),y[24]||(y[24]=ce(" SAP Posting: Allowed ",-1))]),R("div",lo,[T(ie,{name:"cancel",color:"red",size:"16px"}),y[25]||(y[25]=ce(" SAP Posting: Blocked ",-1))]),R("div",no,[T(ie,{name:"cancel",color:"red",size:"16px"}),y[26]||(y[26]=ce(" Blocked â€” SAP inactive ",-1))])])]),_:1})])]),T(kt),R("div",oo,[R("div",ro,[T(Pt,{rounded:"",class:"bg-grey-1"},{default:L(()=>[R("div",so,[K.value.inactive?(oe(),Ie("div",io," â›” "+Ae(K.value.inactive)+" inactive items in SAP ",1)):Je("",!0),K.value.noItem?(oe(),Ie("div",uo," ðŸ“¦ "+Ae(K.value.noItem)+" items not mapped ",1)):Je("",!0),K.value.noStock?(oe(),Ie("div",co," ðŸ“‰ "+Ae(K.value.noStock)+" items with no stock ",1)):Je("",!0),K.value.insufficientStock?(oe(),Ie("div",vo," âš  "+Ae(K.value.insufficientStock)+" insufficient stock ",1)):Je("",!0),R("div",fo,[ce(" ðŸ§¾ "+Ae(u.value)+" / "+Ae(r.value)+" lines will be posted to SAP ",1),j.value?(oe(),Ie("span",mo," â€” showing blocked only ")):Je("",!0)]),R("div",go,[T(ie,{name:"do_not_disturb",color:"grey",size:"16px"}),y[27]||(y[27]=ce(" Business rules not evaluated ",-1))])])]),_:1})]),R("div",ho,[T(Ht,{class:"clean-card q-mt-md"},{default:L(()=>[T(Ge,{class:"row items-center justify-between"},{default:L(()=>[R("div",yo,[R("div",bo,[T(ie,{name:"account_tree",size:"18px"}),y[28]||(y[28]=ce(" Mapped ERP Table ",-1))]),y[29]||(y[29]=R("div",{class:"text-caption text-grey-6"},"Standardized schema",-1))])]),_:1}),T(kt),T(Ge,{class:"q-pa-none"},{default:L(()=>[(oe(),_e(ha,{key:`${q.value.length}-${j.value}`,columns:D,rows:ve.value,"row-key":"Barcode","sticky-header":"",dense:"",flat:"",bordered:"",pagination:I.value,"onUpdate:pagination":y[14]||(y[14]=_=>I.value=_),"rows-per-page-options":W,separator:"horizontal","row-class":ye,class:"clean-table erp-table"},{"body-cell-SAPActive":L(_=>[T(xt,{props:_},{default:L(()=>[R("div",So,[T(lt,{color:_.row.SAPActive?"green":"red","text-color":"white",class:"q-px-sm"},{default:L(()=>[ce(Ae(_.row.SAPActive?"ACTIVE":"INACTIVE"),1)]),_:2},1032,["color"])])]),_:2},1032,["props"])]),"body-cell-PricelistStatus":L(_=>[T(xt,{props:_},{default:L(()=>[R("div",_o,[_.row.PricelistStatus==="PRICELIST_EXISTS"?(oe(),_e(lt,{key:0,color:"green","text-color":"white",class:"q-px-sm"},{default:L(()=>[...y[30]||(y[30]=[ce(" OK ",-1)])]),_:1})):_.row.PricelistStatus==="NO_PRICELIST"?(oe(),_e(lt,{key:1,color:"red","text-color":"white",class:"q-px-sm"},{default:L(()=>[...y[31]||(y[31]=[ce(" NO PRICE ",-1)])]),_:1})):(oe(),_e(lt,{key:2,color:"grey","text-color":"white",class:"q-px-sm"},{default:L(()=>[...y[32]||(y[32]=[ce(" N/A ",-1)])]),_:1}))])]),_:2},1032,["props"])]),"body-cell-NotPostToSAP":L(_=>[T(xt,{props:_},{default:L(()=>[R("div",wo,[_.row.NotPostToSAP===null?(oe(),_e(ie,{key:0,name:"do_not_disturb",color:"grey",size:"20px"})):_.row.NotPostToSAP?(oe(),_e(ie,{key:1,name:"block",color:"red",size:"20px"},{default:L(()=>[T(kn,null,{default:L(()=>[ce(Ae(de(_.row)),1)]),_:2},1024)]),_:2},1024)):(oe(),_e(ie,{key:2,name:"check_circle",color:"green",size:"20px"}))])]),_:2},1032,["props"])]),"body-cell-CanPostToSAP":L(_=>[T(xt,{props:_},{default:L(()=>[R("div",Co,[_.row.CanPostToSAP?(oe(),_e(ie,{key:0,name:"task_alt",color:"green",size:"22px"})):_.row.NotPostToSAP===!0||_.row.SAPActive===!1?(oe(),_e(ie,{key:1,name:"cancel",color:"red",size:"22px"})):(oe(),_e(ie,{key:2,name:"do_not_disturb",color:"grey",size:"22px"}))])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]))]),_:1})]),_:1}),T(he,{icon:"cloud_upload",color:"light-blue-14",label:"Submit",class:"rounded-borders q-mt-md",loading:A.value,disable:A.value||q.value.length===0||b.value,onClick:be,outline:""},null,8,["loading","disable"])])])]),_:1})]),_:1}))}};export{xo as default};
